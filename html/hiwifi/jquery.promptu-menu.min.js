(function(a){a.fn.promptumenu=function(b){var c=a.extend({columns:3,rows:4,direction:"horizontal",width:"auto",height:"auto",duration:500,pages:true,showPage:true,inertia:250},b);return this.each(function(){var o=a(this);var m;var q={x:0,y:1,page:1};var r={width:0,height:0,pages:1,current_page:1};var f={go_to:function(t,w,s){if(w===undefined){w="swing"}if(s===undefined){s=false}var v,u;if(c.direction=="vertical"){v={top:(t-1)*m.height*(-1)};u={"-webkit-transform":"translate3d(0px, "+((t-1)*m.height*(-1))+"px, 0px)"}}else{v={left:(t-1)*m.width*(-1)};u={"-webkit-transform":"translate3d("+((t-1)*m.width*(-1))+"px, 0px, 0px)"}}if(s){o.css({"-webkit-transition-property":"-webkit-transform","-webkit-transition-duration":c.duration+"ms","-webkit-transition-timing-function":"ease-out"});o.css(u);if(c.direction=="vertical"){o.data("ppos",(t-1)*m.height*(-1))}else{o.data("ppos",(t-1)*m.width*(-1))}}if(navigator.userAgent.indexOf("Firefox")>0){o.animate(v,c.duration,w)}if(!s&&navigator.userAgent.indexOf("Firefox")<=0){o.animate(v,c.duration,w)}o.parent(".promptumenu_window").find(".promptumenu_nav a.active").removeClass("active");o.parent(".promptumenu_window").find(".promptumenu_nav a:nth-child("+(t)+")").addClass("active");r.current_page=t},next_page:function(){f.go_to(r.current_page+1)},prev_page:function(){f.go_to(r.current_page-1)}};if(o.data("promptumenu")){console.error("You are calling promptumenu for an element more than twice. Please have a look.")}else{o.data("promptumenu",true);o.data("ppos",0);m={width:(c.width=="auto")?o.width():c.width,height:(c.height=="auto")?o.height():c.height,margin:o.css("margin"),position:(o.css("position")=="absolute")?"absolute":"relative",top:o.css("top"),right:o.css("right"),bottom:o.css("bottom"),left:o.css("left"),padding:0,display:"block",overflow:"hidden"};r.width=m.width/c.columns;r.height=m.height/c.rows;o.wrap('<div class="promptumenu_window" />');a(".promptumenu_window").css(m).css({position:"relative",left:"50%",marginLeft:-parseInt(a(this).width()/2)});o.css({display:"block",position:"absolute","list-style":"none",overflow:"visible",height:"auto",width:"auto",top:0,left:0,margin:0,padding:0});o.children("li").css({display:"block",position:"absolute",margin:0});var h=o.children("li").length;o.children("li").each(function(t){var u=a(this);u.css({width:c.width/c.columns+"px"});q.x+=1;if(q.x>c.columns){q.x=1;q.y+=1}if(q.y>c.rows){q.x=1;q.y=1;q.page+=1}u.data("layout",a.extend({},q));if(c.direction=="vertical"){u.css({top:Math.round((q.y*r.height-r.height/2)-(u.height()/2)+(q.page-1)*m.height),left:Math.round((q.x*r.width-r.width/2)-(u.width()/2))});u.find("img").bind("load",function(){var v=u.data("layout");u.css({top:Math.round((v.y*r.height-r.height/2)-(u.height()/2)+(v.page-1)*m.height),left:Math.round((v.x*r.width-r.width/2)-(u.width()/2))})})}else{var s=r.width*t;u.css({top:Math.round((q.y*r.height-r.height/2)-(u.height()/2)),left:s});u.find("img").bind("load",function(){var v=u.data("layout");u.css({top:Math.round((v.y*r.height-r.height/2)-(u.height()/2)),left:s})})}});r.pages=q.page;o.data("promptumenu_page_count",r.pages);if(r.pages>1&&c.pages==true&&c.showPage==true){var e='<a class="active">Page 1</a>';for(i=2;i<=r.pages;i++){e=e+"<a>Page "+i+"</a>"}o.parent("div.promptumenu_window").append('<div class="promptumenu_nav">'+e+"</div>");o.parent("div.promptumenu_window").find(".promptumenu_nav a").bind("click.promptumenu",function(){f.go_to(a(this).index()+1)})}if(c.direction=="vertical"){o.css({width:m.width,height:m.height*r.pages})}else{o.css({width:m.width*r.pages,height:m.height})}o.bind("mousedown.promptumenu",function(t){t.preventDefault();o.stop(true,false);var v=o.position();var u={x:t.pageX,y:t.pageY};var w={x:0,y:0};var s=new Array();a(document).bind("mousemove.promptumenu",function(z){z.preventDefault();var y=new Date();var x={time:y.getTime(),x:z.pageX,y:z.pageY};while(s.length>4){s.shift()}if(c.direction=="vertical"){w.y=z.pageY-u.y;o.css("top",v.top+w.y)}else{w.x=z.pageX-u.x;o.css("left",v.left+w.x)}s.push(x)});a(document).bind("mouseup.promptumenu",function(z){z.preventDefault();a(document).unbind(".promptumenu");var x=new Date();var y=s[0];if(y==undefined){return}var E={time:x.getTime(),x:z.pageX,y:z.pageY};var A={time:(E.time-y.time),x:(E.x-y.x),y:(E.y-y.y)};var B={x:A.x/A.time,y:A.y/A.time};if(c.direction=="vertical"){var D=v.top+w.y+B.y*c.inertia;if(D<((-1)*m.height*(r.pages-1))){D=(-1)*m.height*(r.pages-1)}else{if(D>0){D=0}}if(c.pages){var C=Math.round((-D)/m.height);f.go_to(C+1,"inertia")}else{o.animate({top:D},Math.abs(B.y*c.inertia),"inertia")}}else{var D=v.left+w.x+B.x*c.inertia;if(D<((-1)*m.width*(r.pages-1))){D=(-1)*m.width*(r.pages-1)}else{if(D>0){D=0}}if(c.pages){var C=Math.round((-D)/m.width);f.go_to(C+1,"inertia")}else{o.animate({left:D},Math.abs(B.x*c.inertia),"inertia")}}})});try{var d,l,k;var g=new Array();var j=function(u){u.preventDefault();var t=new Date();var s={time:t.getTime(),x:u.touches[0].pageX,y:u.touches[0].pageY};while(g.length>4){g.shift()}if(c.direction=="vertical"){k.y=u.touches[0].pageY-l.y;o.css("-webkit-transform","translate3d(0px, "+(d+k.y)+"px, 0px)")}else{k.x=u.touches[0].pageX-l.x;o.css("-webkit-transform","translate3d("+(d+k.x)+"px, 0px, 0px)")}g.push(s)};var p=function(t){t.preventDefault();document.removeEventListener("touchmove",j,false);document.removeEventListener("touchend",p,false);var v=new Date();var s=g[0];if(s==undefined){return}var w=g[g.length-1];var B={time:(w.time-s.time),x:(w.x-s.x),y:(w.y-s.y)};var u={x:B.x/B.time,y:B.y/B.time};if(c.direction=="vertical"){if(isNaN(u.y)){u.y=2}o.css({"-webkit-transition-duration":Math.abs(u.y*c.inertia*3)+"ms","-webkit-transition-timing-function":"ease-out"});var y=d+k.y+u.y*c.inertia;if(y<((-1)*m.height*(r.pages-1))){y=(-1)*m.height*(r.pages-1)}else{if(y>0){y=0}}if(c.pages){var x=Math.round((-y)/m.height);var A=parseInt(a(t.target).attr("rel"));var z;if(B.y<0||z==0){z=A+1;if(z==10){z-=1}}else{z=A-1;if(z==0){z+=1}}f.go_to(z,"inertia",true)}else{o.css("-webkit-transform","translate3d(0px, "+y+"px, 0px)");o.data("ppos",y)}}else{if(isNaN(u.x)){u.x=2}o.css({"-webkit-transition-duration":Math.abs(u.y*c.inertia*3)+"ms","-webkit-transition-timing-function":"ease-out"});var y=d+k.x+u.x*c.inertia;if(y<((-1)*m.width*(r.pages-1))){y=(-1)*m.width*(r.pages-1)}else{if(y>0){y=0}}if(c.pages){var x=Math.round((-y)/m.width);f.go_to(x+1,"inertia",true)}else{o.css("-webkit-transform","translate3d("+y+"px, 0px, 0px)");o.data("ppos",y)}}};o[0].addEventListener("touchstart",function(t){o.unbind(".promptumenu");o.stop(true,false);o.css({"-webkit-transition-duration":"0ms"});var s=new Date();d=o.data("ppos");l={x:t.touches[0].pageX,y:t.touches[0].pageY,time:s.getTime()};k={x:0,y:0};g=new Array();o[0].addEventListener("touchmove",j,false);o[0].addEventListener("touchend",p,false);o[0].addEventListener("touchcancel",p,false)},false);a(".promptu-tag")[0].addEventListener("touchstart",function(t){o.unbind(".promptumenu");o.stop(true,false);o.css({"-webkit-transition-duration":"0ms"});var s=new Date();d=o.data("ppos");l={x:t.touches[0].pageX,y:t.touches[0].pageY,time:s.getTime()};k={x:0,y:0};g=new Array();document.addEventListener("touchmove",j,false);document.addEventListener("touchend",p,false);document.addEventListener("touchcancel",p,false)},false)}catch(n){}}})}})(jQuery);jQuery.extend(jQuery.easing,{inertia:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a}});